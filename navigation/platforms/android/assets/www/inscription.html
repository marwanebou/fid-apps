<!DOCTYPE html>
<head>
        <meta charset="utf-8" />
		<script src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script> 
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *">
        <meta name="format-detection" content="telephone=no">
        <meta name="msapplication-tap-highlight" content="no">
        <link rel="stylesheet"  href="libs/jQM-flat/jquery.mobile.flatui.css">
        <link rel="stylesheet" type="text/css" href="css/index.css" />
		<SCRIPT language='javascript' src='js/soapclient.js'></SCRIPT>
		        <script type="text/javascript" src="libs/fastclick.min.js"></script>
        <script type="text/javascript" src="phonegap.js"></script>
        <script type="text/javascript" src="libs/jquery-2.0.3.min.js"></script>
        <script type="text/javascript" src="libs/jQueryMobile/jquery.mobile-1.3.2.min.js"></script>
        <script type="text/javascript" src="cordova.js"></script>	
        <script type="text/javascript" src="js/index.js"></script>
</head>
<body>
            <div  id="inscription-page" data-role="page">
                <div data-role="header" data-id="header" id="header" data-position="fixed" class="ui-header">
                    <a onclick=window.location.href='index.html' data-icon="arrow-l" data-inline="true" >Back</a>
                    <h1>Inscription Page</h1>
                </div>
                <div data-role="content" >
				<script src="js/qr.js"></script>
                <form name="formulaire" method="post" onsubmit="return inscription()">
					<label for="login">Login *      : </label>
					<input type="text" name="login" data-mini="false" placeholder="Username"/><br>
					<label for="password">Password *      : </label>
					<input type="password" name="password" id="password" data-mini="false" placeholder="MDP"/><br>
					<label for="email">Email *     : </label>
					<input type="text" name="email" id="email" data-mini="false" placeholder="email"><br>
					<select id="civilite">
						<option value="0">Mr.</option>
						<option value="1">Mme</option>
					</select>
					<label for="nom">Nom *     : </label>
					<input type="text" name="nom" id="nom" data-mini="false" placeholder="nom"><br>
					<label for="prenom">Prenom *     : </label>
					<input type="text" name="prenom" id="prenom" data-mini="false" placeholder="prenom"><br>
					<label for="tel">Tel.      : </label>
					<input type="text" name="telmobile" id="telmobile" data-mini="false" placeholder="Télephone Mobile"><br>
					<a target='_blank' style='text-decoration: none'><button onclick='scan();'>Scanner Votre carte</button></a>
					<input type="text" name="codebarre" id="codebarre" data-mini="false" placeholder="code à barre">
                    <button type="submit" data-theme="f" data-mini="false" class="ui-btn-hidden" aria-disabled="false">Inscription</button>				
				</form>		
			   </div>
			   
			   <div id="demo">
			   </div>
			   
                <div id="footer" data-role="footer" data-id="footer1" data-position="fixed" data-tap-toggle="false">
                    <div id="navbar" data-role="navbar">
                        <ul>
						 <li><a id="login-button" onclick=window.location.href='login.html'       data-icon="flat-menu">Login</a></li>
                         <li><a id="list-button"  onclick=window.location.href='inscription.html' data-icon="flat-menu" data-theme="b">inscription</a></li>
                        </ul>
                    </div>
                </div>
            </div>

<SCRIPT language='javascript'>
javascript:window.history.forward(1);
function inscription()
{
var url= "http://ws-ifsproject2016.rhcloud.com/server.php/Ajout_client_web";
var nom_restaurant = localStorage.getItem("nom_restaurant");
var cordonne = new Array();
cordonne["login"] = document.forms["formulaire"]["login"].value;
cordonne["password"] = document.forms["formulaire"]["password"].value;
cordonne["nom"] = document.forms["formulaire"]["nom"].value;
cordonne["prenom"] = document.forms["formulaire"]["prenom"].value;
cordonne["civilite"] =civilite.options[civilite.selectedIndex].value;
cordonne["societe"] = "";
cordonne["telfixe"] = "";
cordonne["telmobile"] = document.forms["formulaire"]["telmobile"].value;
cordonne["email"] = document.forms["formulaire"]["email"].value;
cordonne["fax"] = "";
cordonne["adresse"] = "";
cordonne["codepostal"] = "";
cordonne["ville"] = "";
cordonne["pays"] = "";
cordonne["code1"] = "";
cordonne["code2"] = "";
cordonne["interphone1"] = "";
cordonne["interphone2"] = "";
cordonne["etage"] = "";
cordonne["porte"] = "";
cordonne["codebarre"] = document.forms["formulaire"]["codebarre"].value;
cordonne["commentaire"] = "";
if ((cordonne["login"]=="")||(cordonne["email"]=="")||(cordonne["password"]==""))
{
alert("champs obilgatoire vide");
}
else 
{
var pl = new SOAPClientParameters();
pl.add("cordonne", cordonne);
pl.add("nom_restaurant", nom_restaurant);
SOAPClient.invoke(url, "Ajout_client_web", pl, true, inscription_callBack);
function inscription_callBack(res)
{
if (res.bol)
		{
		localStorage.setItem("email",cordonne["email"]);
		alert("un code de verification est envoyé a votre email");
		window.location.href="verification.html";	
		}
   else 
        {
		alert("Ces informations existe déja pour un client");
		}
}
}
}
</SCRIPT>
</body>
</html>